<div th:fragment="verrijking(id, verrijking)">

    <section>
        <h2>Verrijking</h2>
        <section>
            <h3>Rijksregister</h3>
            <div class="grid-container-3">
                <section class="grid-column">
                    <h4>Overledene</h4>
                    <div class="label">Rijksregisternummer</div>
                    <div class="bottom-spacing" th:text="${verrijking.rrnOverledene()}">-</div>
                    <div class="label">Naam</div>
                    <div class="bottom-spacing" th:text="${verrijking.naamOverledene()}">-</div>
                    <div class="label">Geslacht</div>
                    <div class="bottom-spacing" th:text="${verrijking.geslachtOverledene()}">-</div>
                    <div class="label">Datum</div>
                    <div class="bottom-spacing" th:text="${verrijking.geboorteDatumOverledene()}">-</div>
                </section>
                <section class="grid-column">
                    <h4>Moeder</h4>
                    <div class="label">Rijksregisternummer</div>
                    <div class="bottom-spacing" th:text="${verrijking.rrnMoeder()}">-</div>
                    <div class="label">Naam</div>
                    <div class="bottom-spacing" th:text="${verrijking.naamMoeder()}">-</div>
                    <div class="label">Geslacht</div>
                    <div class="bottom-spacing" th:text="${verrijking.geslachtMoeder()}">-</div>
                    <div class="label">Datum</div>
                    <div class="bottom-spacing" th:text="${verrijking.geboorteDatumMoeder()}">-</div>
                </section>
                <section class="grid-column">
                    <h4>Vader of meemoeder</h4>
                    <div class="label">Rijksregisternummer</div>
                    <div class="bottom-spacing" th:text="${verrijking.rrnVaderOfMeeMoeder()}">-</div>
                    <div class="label">Naam</div>
                    <div class="bottom-spacing" th:text="${verrijking.naamVaderOfMeeMoeder()}">-</div>
                    <div class="label">Geslacht</div>
                    <div class="bottom-spacing" th:text="${verrijking.geslachtVaderOfMeeMoeder()}">-</div>
                    <div class="label">Datum</div>
                    <div class="bottom-spacing" th:text="${verrijking.geboorteDatumVaderOfMeeMoeder()}">-</div>
                </section>
            </div>
            <h3>Andere</h3>
            <section class="grid-column">
                <div class="label">PV- / systeem-nummer</div>
                <div class="bottom-spacing" th:text="${verrijking.pvOfSysteemNummer()}">-</div>
            </section>
            <section class="grid-column">
                <button onclick="on()">Vul gegevens aan</button>
            </section>
        </section>

        <div id="overlay">
            <div class="overlay-content">
                <button style="float: right;" onclick="off()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                        <path fill="currentColor"
                              d="M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6z"/>
                    </svg>
                </button>
                <h4>Vul gegevens aan</h4>
                <br>
                <div><label for="rrnOverledene">Rijksregisternummer overledene</label></div>
                <div><input id="rrnOverledene" type="text" name="rrnOverledene"/></div>
                <br>
                <div><label for="rrnMoeder">Rijksregisternummer moeder</label></div>
                <div><input id="rrnMoeder" type="text" name="rrnMoeder"/></div>
                <div>
            <span>
                <input id="rrnMoederNieVerblijfshouder" type="checkbox" name="rrnMoederNieVerblijfshouder"/>
                <label for="rrnMoederNieVerblijfshouder">Niet-verblijfshouder</label>
                <input id="rrnMoederNietGekend" type="checkbox" name="rrnMoederNietGekend"/>
                <label for="rrnMoederNietGekend">Niet gekend</label>
            </span>
                </div>
                <br>
                <div>
                    <div><label for="rrnVaderOfMeeMoeder">Rijksregisternummer vader of meemoeder</label></div>
                    <div><input id="rrnVaderOfMeeMoeder" type="text" name="rrnVaderOfMeeMoeder"/></div>
                    <span><input id="rrnVaderOfMeeMoederNVT" type="checkbox" name="rrnVaderOfMeeMoederNVT"/>
            <label for="rrnVaderOfMeeMoederNVT">Niet van toepassing</label></span>
                </div>
                <br>
                <div>
                    <div><label for="rrnPvOfSysteemNummer">PV- of systeemnummer</label></div>
                    <div><input id="rrnPvOfSysteemNummer" type="text" name="rrnPvOfSysteemNummer"/></div>
                    <span><input id="rrnPvOfSysteemNummerNVT" type="checkbox" name="rrnPvOfSysteemNummerNVT"/>
            <label for="rrnPvOfSysteemNummerNVT">Niet van toepassing</label></span>
                </div>
                <br>

                <button th:onclick="vulGegevensAan([[${id}]], [[${@globalVariables.frontedBaseUrl}]]);">Vul gegevens aan
                </button>
            </div>

        </div>
        <span id="errorVerrijking" class="error"></span>

        <script>
            function on() {
                document.getElementById("overlay").style.display = "block";
            }

            function vulGegevensAan(id, frontedBaseUrl) {
                const rrnOverledene = document.getElementById('rrnOverledene').value
                const rrnMoeder = document.getElementById('rrnMoeder').value
                const rrnMoederNieVerblijfshouder = document.getElementById('rrnMoederNieVerblijfshouder').checked
                const rrnMoederNietGekend = document.getElementById('rrnMoederNietGekend').checked
                const rrnVaderOfMeeMoeder = document.getElementById('rrnVaderOfMeeMoeder').value
                const rrnVaderOfMeeMoederNVT = document.getElementById('rrnVaderOfMeeMoederNVT').checked
                const rrnPvOfSysteemNummer = document.getElementById('rrnPvOfSysteemNummer').value
                const rrnPvOfSysteemNummerNVT = document.getElementById('rrnPvOfSysteemNummerNVT').checked

                fetch(frontedBaseUrl + '/dossier/' + id + '/verrijk', {
                    method: "post",
                    body: JSON.stringify({
                        overledene: {
                            rijksregisternummer: rrnOverledene
                        },
                        moeder: {
                            rijksregisternummer: rrnMoeder,
                            nietVerblijfshouder: rrnMoederNieVerblijfshouder,
                            nietGekend: rrnMoederNietGekend,
                        },
                        vaderOfMeeMoeder: {
                            rijksregisternummer: rrnVaderOfMeeMoeder,
                            nietVantoepassing: rrnVaderOfMeeMoederNVT
                        },
                        pvOfSystemNummer: {
                            nummer: rrnPvOfSysteemNummer,
                            nietVantoepassing: rrnPvOfSysteemNummerNVT
                        },
                    })
                }).then(async response => {
                    if (response.status === 400) {
                        document.getElementById("errorVerrijking").style.display = "block";
                        document.getElementById("errorVerrijking").innerText = await response.text();
                        off()
                    } else {
                        off()
                        window.location.reload();
                    }
                });

            }

            function off() {
                document.getElementById("overlay").style.display = "none";

            }
        </script>
</div>